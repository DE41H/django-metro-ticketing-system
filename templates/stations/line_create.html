{% extends "base.html" %}

{% block title %}Create New Line{% endblock %}

{% block content %}
<style>
    .form-container {
        max-width: 500px;
        margin: 30px auto;
        background: #fff;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
    }
    input[type="text"], input[type="color"] {
        width: 100%;
        padding: 10px;
        margin: 5px 0 15px 0;
        display: inline-block;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }
    .btn-save {
        width: 100%;
        background-color: #28a745;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
    }
    .btn-save:hover { background-color: #218838; }
    .cancel-link {
        display: block;
        text-align: center;
        margin-top: 15px;
        color: #666;
        text-decoration: none;
    }
</style>

<div class="form-container">
    <h2 style="text-align: center;">Create Metro Line</h2>
    
    <form method="post">
        {% csrf_token %}
        
        {% for field in form %}
            <label for="{{ field.id_for_label }}">
                <strong>{{ field.label }}</strong>
            </label>
            
            {{ field }}
            
            {% if field.help_text %}
                <small style="color: grey">{{ field.help_text }}</small>
            {% endif %}
            
            {% for error in field.errors %}
                <div style="color: red; font-size: 0.9em; margin-bottom: 10px;">
                    {{ error }}
                </div>
            {% endfor %}
            <br>
        {% endfor %}

        <button type="submit" class="btn-save">Save Line</button>
    </form>
    
    <a href="{% url 'stations:list' %}" class="cancel-link">Cancel</a>
</div>

<script>
    // Optional: Attempt to turn the 'color' text input into a color picker
    document.addEventListener("DOMContentLoaded", function() {
        const colorInput = document.querySelector('input[name="color"]');
        if (colorInput) {
            colorInput.type = 'color';
            // Set a default if empty to avoid black box issues
            if (!colorInput.value) colorInput.value = '#0000ff';
        }
    });
</script>
{% endblock %}